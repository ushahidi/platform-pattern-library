<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie10 lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie10 lt-ie9"> <![endif]-->
<!--[if IE 9]>         <html class="no-js lt-ie10"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

@@include('../partials/_pl-head.html')

<body class="has-fixed-bottom">

    <div class="tour-mask"></div>

    <div id="plans" class="tour-message tour-modal">
        <strong class="tour-tagline">Change your plan</strong>

        <div class="tiers">
            <div class="payment">
                <h3>Enter your payment information</h3>
                <!--form-->
                    <label class="input-label required" for="cc-name">Name on card</label>
                    <input type="text" placeholder="Jane Doe" id="cc-name"></input>

                    <label class="input-label required" for="cc-number">Credit Card Number</label>
                    <input type="text" inputmode="numeric" autocomplete="cc-number" placeholder="" id="cc-number" />

                    <div class="flex-col">
                        <div class="col">
                            <fieldset>
                                <legend class="input-label">Expiration</legend>
                                <div class="custom-select">
                                    <select name="cc-exp-month" autocomplete="cc-exp-month">
                                        <option value="1">Month</option>
                                        <option value="2">January</option>
                                        <option value="3">February</option>
                                    </select>
                                </div>
                                <div class="custom-select">
                                    <select name="cc-exp-year" autocomplete="cc-exp-year">
                                        <option value="1">Year</option>
                                        <option value="2">2015</option>
                                        <option value="3">2016</option>
                                    </select>
                                </div>
                            </fieldset>
                        </div>

                        <div class="col">
                            <label class="input-label required" for="cc-cvv">CVV</label>
                            <input style="width:80px;" type="text" inputmode="numeric" autocomplete="cc-csc" placeholder="" id="cc-cvv"></input>
                        </div>

                        <div class="col">
                            <label class="input-label required" for="cc-zip">Zip/Postal Code</label>
                            <input style="width:100px;" type="text" placeholder="" id="cc-zip"></input>
                        </div>
                    </div>

                    <p class="small">*These fields are required.</p>

                    <button data-cue="finished">Continue</button>
                    <a data-payment="cancel" class="cta" href="">Cancel</a>
                <!--/form-->
            </div>

            <div id="mapper" class="tier">
                <div class="tier-header">
                    <h2 class="tier-name">Mapper</h2>
                    <p>For people who need to gather one type of data on a map</p>

                    <!--<div data-target="annual">
                        <h3 class="nodisplay">Annual price</h3>
                        <strong class="tier-price">Free</em></strong>
                    </div>-->
                    <div data-target="monthly">
                        <h3 class="nodisplay">Monthly price</h3>
                        <strong class="tier-price">Free</strong>
                    </div>

                    <h3 class="tier-feature">150 posts <em>+$15/month per 100 extra</em></h3>
                </div>

                <div class="tier-action">
                    <button data-cue="finished">Choose Mapper</button>
                </div>

                <div class="tier-feature-list">
                    <ul>
                        <li>5 post types</li>
                        <li>View data in a map or list</li>
                        <li>Save searches and collections</li>
                        <li>See trends developing within your deployment</li>
                    </ul>
                </div>

                <p class="tier-view-all"><a href="features.html" class="cta">View all features</a></p>
            </div>

            <div id="surveyor" class="tier">
                <div class="tier-header">
                    <h2 class="tier-name">Surveyor</h2>
                    <p>For teams collecting multiple data types from many sources</p>

                    <!--<div data-target="annual">
                        <h3 class="nodisplay">Annual price</h3>
                        <strong class="tier-price">$100 <em>a month</em></strong>
                    </div>-->
                    <div data-target="monthly">
                        <h3 class="nodisplay">Monthly price</h3>
                        <strong class="tier-price">$199 <em>a month</em></strong>
                    </div>

                    <h3 class="tier-feature">1000 posts <em>+$10/month per 1,000 extra</em></h3>
                </div>

                <div class="tier-action">
                    <button data-payment="surveyor">Choose Surveyor</button>
                </div>

                <div class="tier-feature-list">
                    <em>&#8592; Everything from Mapper, and:</em>
                    <ul>
                        <li>Collect posts via SMS and Twitter</li>
                        <li>Turn on notifications related to your interests</li>
                        <li>View data in bar chart or trend graph</li>
                        <li>Choose from more than 10 base maps</li>
                    </ul>
                </div>

                <p class="tier-view-all"><a href="features.html" class="cta">View all features</a></p>
            </div>

            <div id="responder" class="tier">
                <div class="tier-header">
                    <h2 class="tier-name">Responder</h2>
                    <p>For organizations that need to manage their data workflow</p>

                    <!--<div data-target="annual">
                        <h3 class="nodisplay">Annual price</h3>
                        <strong class="tier-price">$500 <em>a month</em></strong>
                    </div>-->
                    <div data-target="monthly">
                        <h3 class="nodisplay">Monthly price</h3>
                        <strong class="tier-price">$499 <em>a month</em></strong>
                    </div>

                    <h3 class="tier-feature">5000 posts <em>+$7.50/month per 1,000 extra</em></h3>
                </div>

                <div class="tier-action">
                    <button data-payment="responder">Choose Responder</button>
                </div>

                <div class="tier-feature-list">
                    <em>&#8592; Everything from Mapper, Surveyor, and:</em>
                    <ul>
                        <li>Team collaboration with user roles</li>
                        <li>Publish posts to specific audiences</li>
                        <li>Unlimited post types</li>
                        <li>Break moderation into assignable 'steps'</li>
                    </ul>
                </div>

                <p class="tier-view-all"><a href="features.html" class="cta">View all features</a></p>
            </div>

            <div id="orbiter" class="tier">
                <div class="tier-header">
                    <h2 class="tier-name">Orbiter</h2>
                    <p>For enterprises managing large, sensitive data sets</p>

                    <div data-target="monthly">
                        <h3 class="nodisplay">Monthly price</h3>
                        <strong class="tier-price" style="font-size:2.5em;">Coming soon</strong>
                    </div>

                    <h3 class="tier-feature">Unlimited posts</h3>
                </div>

                <div class="tier-action">
                    <a href="http://ushahidi.com/contact" class="button tour-link">Contact&nbsp;Us</a>
                </div>

                <div class="tier-feature-list">
                    <em>&#8592; Everything from Mapper, Surveyor and Responder</em>
                </div>
            </div>
        </div>

        <div class="two-col">
            <div class="col">
                <h2 class="tour-heading">Free for charities</h2>
                <p class="tour-body">Ushahidi is free for non-profits and efforts that we believe in. If you think your company may fit the bill, apply for a fully-loaded, free Ushahidi deployment.</p>
                <a href="" target="_blank" class="button">Apply for Free Ushahidi</a>
            </div>

            <div class="col">
                <h2 class="tour-heading">Self-hosted Ushahidi</h2>
                <p class="tour-body">Ushahidi is powered by open-source software, available to anyone to download on GitHub. Customize it, improve it, and host it on your own server for free.</p>
                <a href="" target="_blank" class="button">Download Open Source Code</a>
            </div>
        </div>
    </div>

    @@include('../partials/_header-full.html')

    <div class="wrapper">

        @@include('../partials/_main-menu.html')

                <main class="page-content" role="main">

            <div class="main-col">
                <ul class="breadcrumb">
                   <li>
                       Settings
                   </li>
                </ul>

                <h1>Plans</h1>
            </div><!--end main col-->

        </main> <!--end layout a-->

    </div>

    <footer role="contentinfo">
        <div class="wrapper">
            <div class="footer-container">
                <div class="footer-main-col">
                    <h2>March on City Hall</h2>
                    <ul class="footer-nav">
                        <li><a href="">Home</a></li>
                        <li><a href="">About</a></li>
                        <li><a href="">Activity</a></li>
                        <li><a href="">Settings</a></li>
                        <li><a href="">Help</a></li>
                    </ul>
                </div>
                <div class="footer-secondary-col">
                    <a class="button button-create">
                        <span>Add Post</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>


@@include('../partials/_scripts.html')

<script>
tourPin = function(prevStep, nextStep, target, position) {
    var targetPos = $(target).offset(),
        targetWidth = $(target).outerWidth(),
        targetHeight = $(target).outerHeight();

    $('#'+prevStep).removeClass('active'); // Remove 'active' state from previous step

    // Apply correct state to pin
    // IF: Previous step was a modal
    if ($('#'+prevStep).hasClass('tour-modal')) {
        $('.tour-pin').removeClass(function (index, css) {
            return (css.match (/(^|\s)pin-\S+/g) || []).join(' ');
        }).addClass('pin-enter');

    // ELSE: Previous step was a pin AND the next step is a modal
    } else if (!$('#'+prevStep).hasClass('tour-modal') && $('#'+nextStep).hasClass('tour-modal')) {
        $('.tour-pin').removeClass(function (index, css) {
            return (css.match (/(^|\s)pin-\S+/g) || []).join(' ');
        }).css('top','-100%');

    // ELSE: Previous step was a pin AND the next step is a pin
    } else {
        $('.tour-pin').removeClass('pin-enter').toggleClass('pin-move');
    }

    // IF: Message is attached to a Pin
    if (typeof target !== 'undefined') {
        // Position Pin
        if (typeof position === 'undefined') {
            $('.tour-pin').css({
                'top' : '-100%',
                'left' : '50%'
            });
        } else if (position === 'top-left') {
            $('.tour-pin').css({
                'top' : targetPos.top - 10,
                'left' : targetPos.left - 10
            });
        } else if (position === 'top-right') {
            $('.tour-pin').css({
                'top' : targetPos.top,
                'left' : targetPos.left + targetWidth - 10
            });
        } else if (position === 'bottom-left') {
            $('.tour-pin').css({
                'top' : targetPos.top + targetHeight - 10,
                'left' : targetPos.left
            });
        } else if (position === 'bottom-right') {
            $('.tour-pin').css({
                'top' : targetPos.top + targetHeight - 10,
                'left' : targetPos.left + targetWidth - 10
            });
        } else if (position === 'center') {
            $('.tour-pin').css({
                'top' : targetPos.top + targetHeight/2 - 10,
                'left' : targetPos.left + targetWidth/2 - 10
            });
        } else if (position === 'top-center') {
            $('.tour-pin').css({
                'top' : targetPos.top,
                'left' : targetPos.left + targetWidth/2 - 10
            });
        } else if (position === 'bottom-center') {
            $('.tour-pin').css({
                'top' : targetPos.top + targetHeight - 10,
                'left' : targetPos.left + targetWidth/2 - 10
            });
        }

        // Position message
        $('#'+nextStep).addClass('active').css({ // Add 'active' state to Message and position it horizontally
            'top' : targetPos.top + targetHeight + 40
        });

        // IF: Browser window is wider than 767px, position the message horizontally
        if ($(window).width() > 767) {
            if ((targetPos.left + targetWidth/2) > $(window).width()/2) { // IF: The Pin is positioned on the right half of the screen
                $('#'+nextStep).css({
                    'left' : '65%'
                });
            } else if ((targetPos.left + targetWidth/2) < $(window).width()/2) { // IF: The Pin is positioned on the left half of the screen
                $('#'+nextStep).css({
                    'left' : '35%'
                });
            } else { // IF: The Pin is positioned in the center of the screen
                $('#'+nextStep).css({
                    'left' : '50%'
                });
            }
        }

        // IF: The Pin is positioned more than 33% down the browser window, scroll to it
        if ((targetPos.top + targetHeight) > ($(window).height()/1.5)) {
            $('html, body').animate({
                scrollTop: targetPos.top - 70
            }, 1000);
        }

    // ELSE: Message is a Modal
    } else {
        // Scroll the browser window to the top
        $('html, body').animate({
            scrollTop: 0
        }, 1000);

        // Add 'active' state to Message
        $('#'+nextStep).addClass('active');
    }
}

tourStep = function(step) {
    var prevStep = $('body').attr('data-step'),
        nextStep = step;

    // Set the body's 'data-step' attribute to the next step
    $('body').attr('data-step', nextStep);

    // IF: Next step is a modal
    if ($('#'+nextStep).hasClass('tour-modal')) {
        $('.tour-mask').fadeIn(1000);
        tourPin(prevStep, nextStep); // Position pin and message

    // ELSE: Next step is a pin
    } else {
        $('.tour-mask').fadeOut(500); // Fade out mask
        tourPin(prevStep, nextStep, '[data-message="'+nextStep+'"]', 'bottom-center'); // Position pin and message
    }

    // IF: Browser supports pushState
    if (history.pushState) {
        history.pushState(null, null, '#'+nextStep);
    } else {
        window.location.hash = nextStep;
    }
}

tiersInit = function(element, selected) {
    var context = element !== 'undefined' ? element : $('.tiers'),
        selectedTier = selected !== 'undefined' ? selected : context.find('.tier.selected'), // Selected Tier
        liteTier = context.siblings('.tier.lite'), // Free Tier
        form = context.find('.payment'); // Payment form

    // IF: Payment form is currently visible
    if (context.hasClass('show-payment')) {
        form.fadeOut(500); // Hide the payment form
        context.find('.tier').removeClass('selected'); // Deselect the selected Tier
        context.removeClass('show-payment');
        setTimeout(function(){
            liteTier.slideDown(500).animate({opacity: 1}, 500); // Show the Free Tier
        }, 500);

    // ELSE: Payment form is hidden
    } else {
        form.fadeIn(500); // Show the payment form
        selectedTier.addClass('selected'); // Apple the 'selected' state to the selected Tier
        context.addClass('show-payment');
        setTimeout(function(){
            liteTier.animate({opacity: 0}, 500).slideUp(500); // Hide the Free Tier
        }, 500);
    }

    // Scroll to the top of the window
    context.parent().animate({
        scrollTop: 0
    }, 500);
}

$(document).ready(function(){
    // Look up current step
    function lookupStep() {
        // IF: The current URL includes a hash
        if (window.location.hash) {
            return window.location.hash.substr(1);

        // ELSE: Start from the first step
        } else {
            return 'plans';
        }
    }

    var step = lookupStep();

    // Disable all other links and buttons on the deployment
    $('*').not('[data-cue], .tour-link').on('click', function(e){
        e.preventDefault();
    }).off('click');

    // Click event for cue buttons
    $('[data-cue]').on('click', function() {
        tourStep($(this).attr('data-cue'));
    });

    // Click event for Plans buttons
    $('[data-payment]').on('click', function(e) {
        tiersInit($(this).closest('.tiers'), $(this).closest('.tier'));
        e.preventDefault();
    });

    tiersInit($('.tiers'), $('#responder'));

    // Animate in the appropriate step
    setTimeout(function(){
        tourStep(step);
    }, 1000);

    // Go to correct step on 'Back' button
    window.onpopstate = function(event) {
        tourStep(lookupStep());
    };
});

</script>
</body>

</html>
