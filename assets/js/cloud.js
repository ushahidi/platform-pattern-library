toggleInit=function(t){var a=$(t),e=$(a).attr("data-toggle"),s=$('[data-toggle-target="'+e+'"]').length?$('[data-toggle-target="'+e+'"]'):$(a).next("."+e);$(a).addClass("init"),$(s).addClass("init"),$(s).is(":visible")&&($(a).addClass("active"),$(s).addClass("active"),$(s).hasClass("dropdown-menu")&&dropdownXpos(a,s)),$(a).on("click",function(t){if($("[data-toggle]").not($(a)).removeClass("active"),$("[data-toggle-target], .dropdown-menu").not($(s)).removeClass("active").removeAttr("style"),$(s).is(":hidden")){if($(a).addClass("active"),$(s)[0].hasAttribute("data-toggle-animate")){var e=$(s).attr("data-toggle-animate"),o=""==e?"block":e;$(s).css("display",o).animate({opacity:1},150)}$(s).addClass("active"),$(s).hasClass("dropdown-menu")&&(dropdownXpos(a,s),$(s).oneClickOutside({callback:function(){$(a).removeClass("active"),$(s).removeClass("active").removeAttr("style")},calledFromClickInsideHandler:!0}))}else $(a).removeClass("active"),$(s)[0].hasAttribute("data-toggle-animate")?$(s).animate({opacity:0},150,function(){$(this).css("display","none")}):$(s).css({top:"",left:""}),$(s).removeClass("active"),$("body").removeClass("noscroll"),$(s).hasClass("dropdown-menu")&&$(s).oneClickOutside("off");t.preventDefault()})},dropdownXpos=function(t,a){var e=$(t).offset();"rtl"==$(t).css("direction")||e.left>=$(window).width()-200?$(a).css("right",$(window).width()-(e.left+$(t).outerWidth())):$(a).css("left",e.left),$(a).css("top",e.top+$(t).outerHeight())},$("[data-toggle]").each(function(){toggleInit(this)});
$(".survey-filter-checkbox").each(function(){var e=$(this),c=$(e).find('input[type="checkbox"]');$(e).addClass("init"),$(c).is(":checked")&&$(e).addClass("checked"),$(c).on("change",function(d){$(c).is(":checked")?$(e).addClass("checked"):$(e).removeClass("checked")})});
function pointIcon(o,e,t){return L.divIcon({className:"custom-map-marker "+t,html:'<svg class="iconic" style="fill:#'+o.properties.color+';"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="../../img/iconic-sprite.svg#map-marker"></use></svg><span class="iconic-bg" style="background-color:#'+o.properties.color+';""></span>',iconSize:e,iconAnchor:e,popupAnchor:[-16,-32]})}function onEachFeature(o,e){e.bindPopup(popup).on("click",function(t){e.setIcon(pointIcon(o,[40,40],"selected")),map.on("popupclose",function(t){e.setIcon(pointIcon(o,[32,32]))})})}var popupHTML=function(){var o=null;return $.ajax({async:!1,dataType:"html",url:"../partials/_postcard.html",success:function(e){o=e}}),o}();if($("#map").length){var map=L.map("map",{scrollWheelZoom:!1});L.tileLayer("http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(map);var popup=L.popup({minWidth:"300",maxWidth:"300",className:"pl-popup",offset:L.Point(0,0)}).setContent(popupHTML),deploymentGeoJSON=[{type:"Feature",geometry:{type:"Point",coordinates:[-97.763559,30.253552]},properties:{color:"A51A1A"}},{type:"Feature",geometry:{type:"Point",coordinates:[-97.674815,30.316855]},properties:{color:"A51A1A"}},{type:"Feature",geometry:{type:"Point",coordinates:[-97.69382,30.301458]},properties:{color:"2274B4"}},{type:"Feature",geometry:{type:"Point",coordinates:[-97.740388,30.266052]},properties:{color:"E69327"}},{type:"Feature",geometry:{type:"Point",coordinates:[-97.7471837,30.3016706]},properties:{color:"5BAA00"}}],markers=new L.geoJson(deploymentGeoJSON,{pointToLayer:function(o,e){return L.marker(e,{icon:pointIcon(o,[32,32])})},onEachFeature:onEachFeature}).addTo(map);map.zoomControl.setPosition("bottomright"),map.fitBounds(markers.getBounds(),[24,24]),map.on("popupopen",function(o){toggleInit($(o.popup._contentNode.firstChild).find("[data-toggle]"))})}
var modalToggle=function(o){var a="undefined"!=typeof o?o:".modal";$("body").hasClass("modal-visible")?($("body").removeClass("modal-visible"),setTimeout(function(){$(".modal").fadeOut("fast")},400)):(modalYpos(),$(a).fadeIn("fast",function(){$("body").addClass("modal-visible")}))},modalYpos=function(){var o=$(window).scrollTop();o>0&&$(".modal-window").css("top",o+40),$(".modal-body").css("max-height",.66*$(window).height())};$("[data-modal], .modal-trigger").click(function(o){modalToggle($(this)[0].hasAttribute("data-modal")?"#"+$(this).attr("data-modal"):$(this).closest(".modal")),o.preventDefault()});
var tiersInit=function(e,t){var i="undefined"!=typeof e?e:$(".tiers"),s="undefined"!=typeof t?t:i.find(".tier.selected"),n=i.siblings(".tier.lite"),a=i.find(".payment"),d=$("#selected-tier");i.hasClass("show-payment")?($(document).trigger("tiers:deselect",{selected:null}),a.fadeOut(500),i.find(".tier").removeClass("selected"),i.removeClass("show-payment"),d.val(""),setTimeout(function(){n.slideDown(500).animate({opacity:1},500)},500)):($(document).trigger("tiers:select",{selected:$(s).attr("id")}),a.fadeIn(500),s.addClass("selected"),i.addClass("show-payment"),d.val($(s).attr("id")),setTimeout(function(){n.animate({opacity:0},500).slideUp(500)},500)),i.parent().animate({scrollTop:0},500)};$(document).ready(function(){$("[data-payment]").on("click",function(e){tiersInit($(this).closest(".tiers"),$(this).closest(".tier")),e.preventDefault()})});
var tourPin=function(t,o,e,n){var s=$(e).offset(),i=$(e).outerWidth(),a=$(e).outerHeight();$("#"+t).removeClass("active"),$("#"+t).hasClass("tour-modal")?$(".tour-pin").removeClass(function(t,o){return(o.match(/(^|\s)pin-\S+/g)||[]).join(" ")}).addClass("pin-enter"):!$("#"+t).hasClass("tour-modal")&&$("#"+o).hasClass("tour-modal")?$(".tour-pin").removeClass(function(t,o){return(o.match(/(^|\s)pin-\S+/g)||[]).join(" ")}).css("top","-100%"):$(".tour-pin").removeClass("pin-enter").toggleClass("pin-move"),"undefined"!=typeof e?("undefined"==typeof n?$(".tour-pin").css({top:"-100%",left:"50%"}):"top-left"===n?$(".tour-pin").css({top:s.top-10,left:s.left-10}):"top-right"===n?$(".tour-pin").css({top:s.top,left:s.left+i-10}):"bottom-left"===n?$(".tour-pin").css({top:s.top+a-10,left:s.left}):"bottom-right"===n?$(".tour-pin").css({top:s.top+a-10,left:s.left+i-10}):"center"===n?$(".tour-pin").css({top:s.top+a/2-10,left:s.left+i/2-10}):"top-center"===n?$(".tour-pin").css({top:s.top,left:s.left+i/2-10}):"bottom-center"===n&&$(".tour-pin").css({top:s.top+a-10,left:s.left+i/2-10}),$("#"+o).addClass("active").css({top:s.top+a+40}),$(window).width()>767&&(s.left+i/2>$(window).width()/2?$("#"+o).css({left:"65%"}):s.left+i/2<$(window).width()/2?$("#"+o).css({left:"35%"}):$("#"+o).css({left:"50%"})),s.top+a>$(window).height()/1.5&&$("html, body").animate({scrollTop:s.top-70},1e3)):($("html, body").animate({scrollTop:0},1e3),$("#"+o).addClass("active"))},tourStep=function(t,o){var e="undefined"==typeof t,n=$("body").attr("data-step"),s="undefined"!=typeof t?t:"start";$("body").attr("data-step",s),$("#"+s).hasClass("tour-modal")?($(".tour-mask").fadeIn(1e3),tourPin(n,s)):($(".tour-mask").fadeOut(500),tourPin(n,s,'[data-message="'+s+'"]',"bottom-center")),0!=e||o||(history.pushState?history.pushState(null,null,"#"+s):window.location.hash=s)},tourStepLookup=function(t){return window.location.hash?window.location.hash.substr(1):"undefined"!=typeof t?t:void 0},tourInit=function(t){$("*").not("[data-cue], [data-payment], .tour-link").on("click",function(t){t.preventDefault()}).off("click"),$("[data-cue]").on("click",function(){tourStep($(this).attr("data-cue"))}),setTimeout(function(){tourStep(tourStepLookup(t),!0)},500),window.onpopstate=function(t){tourStep(tourStepLookup())}};